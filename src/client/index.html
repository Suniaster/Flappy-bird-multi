<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<div>

  <div>
    <button onclick="gamestart()">COMEÃ‡AR JOGO</button>
  </div>
  <div>
    <canvas id="canvas" width="1000px" height="1000px"></canvas>
  </div>
  <script src="./client/client.js"></script>
</div>
<script>

const UP = 38;
const DOWN = 40;
const LEFT = 37;
const RIGHT = 39;
const BAR = 32;


var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
var imgFlappy = new Image();
var imgWall = new Image();
imgFlappy.src = './client/img/b.png';
imgWall.src = './client/img/boss_2.png'


var socket = io();

$(document).keydown((event)=>{
  console.log(event.keyCode);
  switch(event.keyCode){
    case 65: // A
    socket.emit('jump', null);
    default:
    break;
  }
})

socket.on("TimePassed", (data)=>{
  ctx.clearRect(0,0, 1000, 1000)
  // console.log(data)
  let obj = JSON.parse(data);
  var img;
  obj.forEach(element => {
    switch(element.symbol){
      case 'Flappy':
      img = imgFlappy;
      break;
      case 'Wall':
      img = imgWall;
      break;
      default:
      img = imgFlappy;
    }

    draw(img, element.position.x, element.position.y);
  });
})

function draw(img, x, y){
  ctx.drawImage(img, x,y);
}

function gamestart(){
  socket.emit('gameStart',null);
}

</script>